<!DOCTYPE html>
<html>
<head>
    <title>URL Monitor</title>
</head>
<body>
    <h1>URL Status Monitor</h1>
    <textarea id="urlInput" rows="10" cols="50" placeholder="Enter URLs here, one per line"></textarea><br>
    <button onclick="checkUrls()">Check URLs</button>
    <button onclick="repeatFailed()">Repeat Failed</button>
    <button onclick="clearStatus()">Clear Status</button>
    <table id="urlStatusList">
        <tr>
            <th>URL</th>
            <th>Status</th>
            <th>Timestamp</th>
        </tr>
    </table>

    <script>
        let failedUrls = [];

        function checkUrls() {
            const urlList = document.getElementById('urlInput').value.split('\n');
            urlList.forEach(url => {
                if(url) checkUrl(url);
            });
        }

        function checkUrl(url) {
            fetch(url, { mode: 'no-cors' })
                .then(response => {
                    updateStatus(url, 'OK');
                })
                .catch(error => {
                    updateStatus(url, 'FAIL');
                    failedUrls.push(url);
                });
        }

        function updateStatus(url, status) {
            const urlStatusList = document.getElementById('urlStatusList');
            const row = urlStatusList.insertRow(-1);
            const cell1 = row.insertCell(0);
            const cell2 = row.insertCell(1);
            const cell3 = row.insertCell(2);

            cell1.innerHTML = `<a href="${url}" target="_blank">${url}</a>`;
            cell2.innerHTML = status;
            cell3.innerHTML = new Date().toLocaleString();

            cell2.style.color = status === 'OK' ? 'green' : 'red';
        }

        function repeatFailed() {
            failedUrls.forEach(url => checkUrl(url));
            failedUrls = [];
        }

        function clearStatus() {
            document.getElementById('urlStatusList').innerHTML = "";
        }
    </script>
</body>
</html>
